(function() {
  "use strict";
  $(document).ready(function() {
    var cal, computedRange, createCalendar, createCalendarHP, filter, getDataForDomain, getLocation, id_klient, isMobile, l, normalizePathname;
    try {
      id_klient = $("#kalendar_js").attr("id_klient");
      id_klient = parseInt(+id_klient);
    } catch (_error) {
      id_klient = 0;
    }
    createCalendar = function(computedRange) {
      var d;
      if (normalizePathname(l.pathname) !== "/kalendar/") {
        return;
      }
      d = new Date();
      return cal.init({
        start: d,
        isMobile: isMobile,
        data: "/kalendar/get_cal_data/",
        itemSelector: "#cal-heatmap-calendar",
        domain: "week",
        weekStartOnMonday: true,
        colLimit: 7,
        cellSize: 40,
        subDomainTextFormat: "%d",
        subDomain: "day",
        range: computedRange,
        cellPadding: 10,
        legend: [0, 5, 10, 20],
        displayLegend: false,
        domainGutter: 20,
        tooltip: false,
        domainDynamicDimension: false,
        itemName: ["Událost", "Události"],
        highlight: ["now"],
        nextSelector: "#next",
        previousSelector: "#prev",
        afterLoadNextDomain: function(date) {
          $("#calendar-year").html(date.getFullYear());
          this.actualDate = date;
          return getDataForDomain(date);
        },
        afterLoadPreviousDomain: function(date) {
          $("#calendar-year").html(date.getFullYear());
          this.actualDate = date;
          return getDataForDomain(date, date, true);
        },
        subDomainDateFormat: function(date) {
          return moment(date).format("LL");
        },
        domainLabelFormat: function(date, value) {
          var firstDate, secondDate;
          firstDate = new Date(date.getFullYear(), date.getMonth(), date.getDate());
          secondDate = new Date(date.getFullYear(), date.getMonth(), date.getDate() + 6);
          if (firstDate.getMonth() !== secondDate.getMonth()) {
            return moment(firstDate).format("MMMM") + " / " + moment(secondDate).format("MMMM");
          } else {
            return moment(firstDate).format("MMMM");
          }
        },
        onClick: function(date, nb) {
          var rozbal, xdate;
          xdate = new Date(1970, 1, 1);
          rozbal = new Date(date.getFullYear(), date.getMonth(), date.getDate());
          getDataForDomain(xdate, rozbal);
          return;
          return false;
        },
        onComplete: function() {
          return getDataForDomain(new Date(), new Date(), true);
        },
        afterLoadData: function(data) {
          var stats;
          stats = {
            datas: {},
            holidays: {}
          };
          $(".calendar").show("slow");
          $.each(data, function(index, item) {
            stats["datas"][index] = item[0];
            if (item[1] === 1) {
              return stats["holidays"][index] = item[2];
            }
          });
          return stats;
        }
      });
    };
    getDataForDomain = function(date, rozbal, init) {
      var data_w, formData, hours, json, minutes;
      try {
        data_w = $("#kalendar_js").attr("data_w");
      } catch (_error) {
        data_w = "";
      }
      if (!init) {
        date.setDate(date.getDate() - 14);
      }
      formData = new Object();
      formData.kal_den = date.getDate() + "/" + (date.getMonth() + 1) + "/" + date.getFullYear();
      hours = (date.getHours() < 10 ? "0" + date.getHours() : date.getHours());
      minutes = (date.getMinutes() < 10 ? "0" + date.getMinutes() : date.getMinutes());
      formData.kal_cas = "00:00";
      formData.pocet = 20;
      formData.w = data_w;
      if (rozbal) {
        formData.rozbal = rozbal.getDate() + "/" + (rozbal.getMonth() + 1) + "/" + rozbal.getFullYear();
      }
      json = JSON.stringify(formData);
      return $.ajax({
        url: "/kalendar/nejblizsi/",
        contentType: "application/json",
        data: json,
        method: "POST",
        dataType: "json",
        success: function(result) {
          var html;
          if (result.status === "OK") {
            html = "";
            $.each(result.kal_udalosti_seznam, function(index, item) {
              var eventTime, mybadge, _rozbal;
              if (item.datum_od === item.datum_do && item.cas_od === item.cas_do) {
                eventTime = "celý den";
              } else {
                eventTime = item.cas_od.substring(0, item.cas_od.length - 3) + " - " + item.cas_do.substring(0, item.cas_od.length - 3);
              }
              if (item.dulezite) {
                mybadge = '<span class="i-important-event" data-toggle="tooltip" data-placement="top" title="Důležitá událost">!</span>';
              } else {
                mybadge = "";
              }
              if (item.rozbal > 0) {
                _rozbal = "";
              } else {
                _rozbal = "class='no-display'";
              }
              if (item.celodenni) {
                html += "<tr><td>" + mybadge + "<a href='#' data-linkIndex='" + index + "' class='recentEventLink'>" + item.nazev + "</a></td><td class='i-date'>" + (moment(item.datum_od).locale("cs").format("D. M. YYYY")) + "</td><td>" + item.typ_value + "</td></tr>\n";
                if (item.typ === "0") {
                  return html += "<tr " + _rozbal + "><td colspan=2>" + eventTime + "<BR>" + item.obsah + "</td> <td class='i-actions'> <button class='btn userEventRemove' data-id='" + item.id_kal_udalost + "'><span data-id='" + item.id_kal_udalost + "' class='glyphicon glyphicon-trash'></span></button> <button data-id='" + item.id_kal_udalost + "' class='btn button_uzivatelska_edit'><span data-id='" + item.id_kal_udalost + "' class='glyphicon glyphicon-edit'></span></button> </td> </tr>\n";
                } else {
                  return html += "<tr " + _rozbal + "><td colspan=2>" + item.obsah + "</td> <td></td></tr>\n";
                }
              } else {
                html += "<tr><td>" + mybadge + "<a href='#' data-linkIndex='" + index + "' class='recentEventLink'>" + item.nazev + "</a></td><td class='i-date'>" + (moment(item.datum_od).locale("cs").format("D. M. YYYY")) + " - " + (moment(item.datum_do).locale("cs").format("D. M. YYYY")) + "</td><td>" + item.typ_value + "</td></tr>\n";
                if (item.typ === "0") {
                  return html += "<tr " + _rozbal + "><td colspan=2>" + eventTime + "<BR>" + item.obsah + "</td> <td class='i-actions'> <button class='btn userEventRemove' data-id='" + item.id_kal_udalost + "'><span data-id='" + item.id_kal_udalost + "' class='glyphicon glyphicon-trash'></span></button> <button data-id='" + item.id_kal_udalost + "' class='btn button_uzivatelska_edit'><span data-id='" + item.id_kal_udalost + "' class='glyphicon glyphicon-edit'></span></button> </td> </tr>\n";
                } else {
                  return html += "<tr " + _rozbal + "><td colspan=2>" + item.obsah + "</td> <td></td></tr>\n";
                }
              }
            });
            $("#recentEventList > tbody").html(html);
            $('#recentEventList > tbody [data-toggle="tooltip"]').tooltip();
            $(".userEventRemove").on("click", function(e) {
              this.u_id = parseInt($(e.target).data("id"));
              $('#dialog-confirm').dialog({
                resizable: false,
                height: 240,
                modal: true,
                buttons: {
                  'Ano': (function(_this) {
                    return function() {
                      formData = new Object();
                      formData.id_kal_udalost_u = _this.u_id;
                      json = JSON.stringify(formData);
                      $.ajax({
                        url: "/kalendar/delete_u/",
                        contentType: "application/json",
                        data: json,
                        method: "POST",
                        dataType: "json",
                        success: function(result) {
                          $.ajax({
                            url: "/kalendar/get_cal_data/",
                            contentType: "application/json",
                            data: json,
                            method: "POST",
                            dataType: "json",
                            success: function(result) {
                              var xdate;
                              cal.update(result);
                              xdate = new Date(1970, 1, 1);
                              getDataForDomain(xdate);
                            }
                          });
                        }
                      });
                      $('#dialog-confirm').dialog('close');
                    };
                  })(this),
                  'Ne': function() {
                    $('#dialog-confirm').dialog('close');
                  }
                }
              });
            });
            $('.button_uzivatelska_edit').click(function(e) {
              var id_kal_udalost_u;
              e.preventDefault();
              id_kal_udalost_u = $(e.target).data("id");
              formData = new Object();
              formData.id_kal_udalost_u = id_kal_udalost_u;
              json = JSON.stringify(formData);
              $.ajax({
                url: "/kalendar/get_u_one/",
                contentType: "application/json",
                data: json,
                method: "POST",
                dataType: "json",
                success: function(result) {
                  if (result.status === "OK") {
                    $("#uzivatelska_modal_label").text("Editace vlastní události: " + result.kal_udalost_u.id_kal_udalost_u);
                    $("#uzivatelska_modal_id_kal_udalost_u").val(result.kal_udalost_u.id_kal_udalost_u);
                    $("#uzivatelska_modal_nazev").val(result.kal_udalost_u.nazev);
                    $("#uzivatelska_modal_obsah").val(result.kal_udalost_u.obsah);
                    $("#uzivatelska_modal_datum_od").val(moment(result.kal_udalost_u.datum_od).format('DD.MM.YYYY H:mm'));
                    $("#uzivatelska_modal_datum_do").val(moment(result.kal_udalost_u.datum_do).format('DD.MM.YYYY H:mm'));
                    $("#uzivatelska_modal_celodenni").attr('checked', result.kal_udalost_u.celodenni);
                    $("#uzivatelska_modal_sdileni").attr('checked', result.kal_udalost_u.sdileni);
                    $('#uzivatelska_modal_datum_do_label').show();
                    $('#uzivatelska_modal_datum_do').show();
                    $('#uzivatelska_modal_datum_od').datetimepicker({
                      timepicker: true
                    });
                    $('#uzivatelska_modal_alert_email').val(result.kal_udalost_u.alert_email);
                    $('#uzivatelska_modal_alert_web').val(result.kal_udalost_u.alert_web);
                    if ($("#uzivatelska_modal_celodenni").is(':checked')) {
                      $('#uzivatelska_modal_datum_do_label').hide();
                      $('#uzivatelska_modal_datum_do').hide();
                      $('#uzivatelska_modal_datum_od').datetimepicker({
                        timepicker: false
                      });
                      $("#uzivatelska_modal_datum_od").val(moment($('#uzivatelska_modal_datum_od').val(), 'DD.MM.YYYY H:mm').set({
                        "hour": 0,
                        "minute": 0
                      }).format('DD.MM.YYYY H:mm'));
                    }
                    $("#uzivatelska_modal_div").modal('show');
                  }
                }
              });
            });
            return $(".recentEventLink").click(function(e) {
              e.preventDefault();
              return $(e.target).closest("tr").next("tr").toggle("slow");
            });
          } else {
            return console.log(result);
          }
        }
      });
    };
    createCalendarHP = function(computedRange) {
      var d;
      if (normalizePathname(l.pathname) !== "/") {
        return;
      }
      if ($(window).width() < 1200) {
        computedRange = 3;
      }
      d = new Date();
      return cal.init({
        start: d,
        data: " /kalendar/get_cal_data/",
        itemSelector: "#cal-heatmap",
        domain: "month",
        subDomain: "day",
        isMobile: isMobile,
        cellSize: 24,
        subDomainTextFormat: "%d",
        range: computedRange,
        cellPadding: 12,
        legend: [0, 5, 10, 20],
        displayLegend: false,
        domainGutter: 0,
        tooltip: true,
        domainDynamicDimension: false,
        itemName: ["Událost", "Události"],
        highlight: ["now"],
        nextSelector: "#next",
        previousSelector: "#prev",
        afterLoadData: function(data) {
          var stats;
          stats = {
            datas: {},
            holidays: {}
          };
          $(".calendar").show("slow");
          $.each(data, function(index, item) {
            stats["datas"][index] = item[0];
            if (item[1] === 1) {
              return stats["holidays"][index] = item[2];
            }
          });
          return stats;
        },
        afterLoadNextDomain: function(date) {
          var html, month, year;
          month = date.getMonth();
          year = date.getFullYear();
          html = year;
          if (month <= 1) {
            html = (year - 1) + "/" + year;
          } else {
            html = year;
          }
          return $("#calendar-year").html(html);
        },
        afterLoadPreviousDomain: function(date) {
          var html, month, year;
          month = date.getMonth();
          year = date.getFullYear();
          html = year;
          if (month === 11 || month === 10) {
            html = year + "/" + (year + 1);
          } else {
            html = year;
          }
          return $("#calendar-year").html(html);
        },
        subDomainDateFormat: function(date) {
          return moment(date).format("LL");
        },
        domainLabelFormat: function(date, value) {
          return moment(date).format("MMMM");
        },
        onClick: function(date, nb) {
          var formData, json, timestamp;
          $(".accordion").html("");
          $(".ch-tooltip").hide();
          $("#calendarEventTitle").html(date.getDate() + "." + (date.getMonth() + 1) + "." + date.getFullYear());
          $("#calEventMsgAlertBoxDanger").html("").hide();
          timestamp = new Date(date).getTime() / 1000;
          formData = new Object();
          formData.kal_aktualni_den = timestamp;
          json = JSON.stringify(formData);
          return $.ajax({
            url: "/kalendar/get_one_day/",
            contentType: "application/json",
            data: json,
            method: "POST",
            dataType: "json",
            success: function(result) {
              var html;
              if (result.status === "OK") {
                if (result.kal_udalosti_seznam.length === 0) {
                  html = "<h3>Žádné události</h3>";
                  $(".accordion").append(html);
                } else {
                  $.each(result.kal_udalosti_seznam, function(index, value) {
                    html = "<h3>" + value.nazev + "</h3><div>" + value.obsah + "</div>";
                    return $(".accordion").append(html);
                  });
                }
                return $(".accordion").accordion({
                  heightStyle: "content",
                  active: false,
                  collapsible: true
                });
              } else {
                return console.log(result);
              }
            }
          });
        },
        onComplete: function() {
          var aspect, chart, container;
          chart = $("#chart");
          aspect = 636 / 288;
          container = chart.parent();
          return $(window).on("resize", function() {
            var targetWidth;
            targetWidth = container.width();
            chart.attr("width", targetWidth);
            return chart.attr("height", Math.round(targetWidth / aspect));
          }).trigger("resize");
        }
      });
    };
    getLocation = function(href) {
      var l;
      l = document.createElement("a");
      l.href = href;
      return l;
    };
    normalizePathname = function(pathname) {
      pathname = pathname.charAt(0) === '/' ? pathname : '/' + pathname;
      return pathname;
    };
    l = getLocation(window.location);
    cal = new CalHeatMap();
    isMobile = false;
    if (/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0, 4))) {
      isMobile = true;
    }
    if (isMobile) {
      computedRange = 1;
    } else {
      computedRange = 3;
    }
    createCalendar(computedRange);
    $("#rewind").on("click", function(event) {
      event.preventDefault();
      return cal.rewind();
    });
    $(".events-filter ul > li > span").click(function(e) {
      e.preventDefault();
      $(this).next().next().next().toggle("fast");
      if ($(this).hasClass("glyphicon glyphicon-minus")) {
        $(this).removeClass("glyphicon glyphicon-minus");
        $(this).addClass("glyphicon glyphicon-plus");
      } else if ($(this).hasClass("glyphicon glyphicon-plus")) {
        $(this).removeClass("glyphicon glyphicon-plus");
        $(this).addClass("glyphicon glyphicon-minus");
      }
    });
    filter = [];
    $(".events-filter ul > li > input").change(function(e) {

      /*
      if($(this).val().split(",")[1] != 0){
      $(this).parent().parent().parent().children("input").prop("checked", false);
      }*
       */
      var data, json, selected;
      if (this.checked) {
        $(this).next().next().show("fast");
        $("li input[type=\"checkbox\"]", $(this).next().next()).prop("checked", true);
      } else {
        $(this).next().next().show("fast");
        $("li input[type=\"checkbox\"]", $(this).next().next()).prop("checked", false);
      }
      $(this).next().next().show("fast");
      selected = [];
      $(".events-filter input:checked").each(function() {
        return selected.push(+$(this).val().split(",")[0]);
      });
      data = new Object();
      data.typy_udalosti = selected;
      json = JSON.stringify(data);
      return $.ajax({
        url: "/set_init_profile/",
        contentType: "application/json",
        data: json,
        method: "POST",
        dataType: "json",
        success: function(result) {
          if (result.status === "OK") {
            $.ajax({
              url: "/kalendar/get_cal_data/",
              contentType: "application/json",
              data: json,
              method: "POST",
              dataType: "json",
              success: function(result) {
                var xdate;
                cal.update(result);
                xdate = new Date(1970, 1, 1);
                getDataForDomain(xdate);
              }
            });
          }
        }
      });
    });
    $('#uzivatelska_modal_datum_od').datetimepicker({
      lang: 'cs',
      dayOfWeekStart: 1,
      todayButton: true,
      format: 'DD.MM.YYYY H:mm',
      formatTime: 'H:mm',
      validateOnBlur: true,
      defaultTime: '00:00',
      timepicker: true,
      onChangeDateTime: function(ct) {
        $('#uzivatelska_modal_datum_do').datetimepicker({
          minDate: moment(ct)
        });
        $("#uzivatelska_modal_datum_do").val(moment($('#uzivatelska_modal_datum_od').val(), 'DD.MM.YYYY H:mm').add(1, 'days').set({
          "hour": 0,
          "minute": 0
        }).format('DD.MM.YYYY H:mm'));
      }
    });
    $('#uzivatelska_modal_datum_do').datetimepicker({
      lang: 'cs',
      dayOfWeekStart: 1,
      todayButton: true,
      format: 'DD.MM.YYYY H:mm',
      formatTime: 'H:mm',
      validateOnBlur: false,
      defaultTime: '00:00',
      timepicker: true,
      onChangeDateTime: function(ct) {
        $('#uzivatelska_modal_datum_od').datetimepicker({
          maxDate: moment(ct)
        });
      }
    });
    $('#button_uzivatelska_nova').click(function(e) {
      e.preventDefault();
      if (id_klient > 0) {
        $("#uzivatelska_modal_label").text("Nová vlastní událost");
        $("#uzivatelska_modal_id_kal_udalost_u").val("");
        $("#uzivatelska_modal_nazev").val("");
        $("#uzivatelska_modal_obsah").val("");
        $("#uzivatelska_modal_datum_od").val(moment().format('DD.MM.YYYY H:mm'));
        $("#uzivatelska_modal_datum_do").val(moment().format('DD.MM.YYYY H:mm'));
        $("#uzivatelska_modal_celodenni").attr('checked', false);
        $("#uzivatelska_modal_sdileni").attr('checked', false);
        $('#uzivatelska_modal_datum_do_label').show();
        $('#uzivatelska_modal_datum_do').show();
        $('#uzivatelska_modal_datum_od').datetimepicker({
          timepicker: true
        });
        $("#uzivatelska_modal_div").modal('show');
      } else {
        $("#loginForm").modal("show");
      }
    });
    $('#uzivatelska_modal_submit').click(function(e) {
      e.preventDefault();
      return $.ajax({
        url: '/kalendar/saveu/',
        type: 'POST',
        contentType: 'application/json',
        dataType: 'json',
        data: JSON.stringify({
          id_kal_udalost_u: $('#uzivatelska_modal_id_kal_udalost_u').val(),
          id_klient: $('#uzivatelska_modal_typ').val(),
          id_subjekt: $('#uzivatelska_modal_kategorie').val(),
          nazev: $('#uzivatelska_modal_nazev').val(),
          obsah: $('#uzivatelska_modal_obsah').val(),
          datum_od: moment($('#uzivatelska_modal_datum_od').val(), 'DD.MM.YYYY H:mm').format('YYYY-MM-DD H:mm'),
          datum_do: moment($('#uzivatelska_modal_datum_do').val(), 'DD.MM.YYYY H:mm').format('YYYY-MM-DD H:mm'),
          sdileni: $('#uzivatelska_modal_sdileni').is(':checked'),
          celodenni: $('#uzivatelska_modal_celodenni').is(':checked'),
          alert_email: $('#uzivatelska_modal_alert_email').val(),
          alert_web: $('#uzivatelska_modal_alert_web').val()
        }),
        error: function(jqXHR, textStatus, errorThrown) {
          alert(textStatus);
        },
        success: function(data, status, response) {
          var html;
          if (data.status === '') {
            $('#uzivatelska_modal_alert').hide();
            $("#uzivatelska_modal_div").modal('hide');
            window.location.reload();
            return;
          } else {
            html = '';
            $.each(data.errors, function(key, value) {
              key = key.charAt(0).toUpperCase() + key.slice(1);
              key = key.replace('_', ' ');
              html = html + '<div class=\'alert alert-danger\' role=\'alert\'><button type=\'button\' class=\'close\' data-dismiss=\'alert\' aria-label=\'Close\'><span aria-hidden=\'true\'>×</span></button>Chybné pole ' + key + ': ' + value + '</div>';
            });
            $('#uzivatelska_modal_alert').html(html);
            $('#uzivatelska_modal_alert').show();
            return false;
          }
        }
      });
    });
    $('#uzivatelska_modal_celodenni').click(function(e) {
      if ($(this).is(':checked')) {
        $('#uzivatelska_modal_datum_do_label').hide();
        $('#uzivatelska_modal_datum_do').hide();
        $('#uzivatelska_modal_datum_od').datetimepicker({
          timepicker: false
        });
        $("#uzivatelska_modal_datum_od").val(moment($('#uzivatelska_modal_datum_od').val(), 'DD.MM.YYYY H:mm').set({
          "hour": 0,
          "minute": 0
        }).format('DD.MM.YYYY H:mm'));
        $('#uzivatelska_modal_datum_od').datetimepicker({
          maxDate: false
        });
        $("#uzivatelska_modal_datum_do").val(moment($('#uzivatelska_modal_datum_od').val(), 'DD.MM.YYYY H:mm').add(1, 'days').set({
          "hour": 0,
          "minute": 0
        }).format('DD.MM.YYYY H:mm'));
        console.log($('#uzivatelska_modal_datum_do').val());
      } else {
        $('#uzivatelska_modal_datum_do_label').show();
        $('#uzivatelska_modal_datum_do').show();
        $('#uzivatelska_modal_datum_od').datetimepicker({
          timepicker: true
        });
      }
    });
    $('#button_udalosti_vsechny').click(function(e) {
      e.preventDefault();
      window.location.href = '/kalendar/';
    });
    return $('#button_udalosti_dulezite').click(function(e) {
      e.preventDefault();
      window.location.href = '/kalendar/?w=dulezite';
    });
  });

}).call(this);
