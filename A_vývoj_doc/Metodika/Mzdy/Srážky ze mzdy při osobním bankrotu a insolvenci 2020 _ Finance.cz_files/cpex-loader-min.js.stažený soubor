window.cpexLoaderVersion="2.72";var CPEX_testSourceCalled_Loader=CPEX_testSourceCalled_Loader||!1;if(window.top.location.href.indexOf("cpexloadersrc=test")>-1&&!CPEX_testSourceCalled_Loader){CPEX_testSourceCalled_Loader=!0;var ppas=document.createElement("script");ppas.async=!0,ppas.type="text/javascript",ppas.src="https://test.cpex.cz/loader/v2/cpex-loader.js";var node=document.getElementsByTagName("script")[0];node.parentNode.insertBefore(ppas,node)}else{window.performance=window.performance||{now:function(){}},function(){if("function"==typeof window.CustomEvent)return!1;window.CustomEvent=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:null};var i=document.createEvent("CustomEvent");return i.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),i}}(),window.cpexLoader=window.cpexLoader||{},window.cpexLoader.scriptsToLoadPath=window.cpexLoader.scriptsToLoadPath||void 0,window.cpexLoader.scriptsToLoad=window.cpexLoader.scriptsToLoad||[],window.cpexLoader.options={maxWaitTime:{cpexSkinObject:480,"pbjs.setAdUnits":15e3},scriptsLoaded:{"cpex-skin.js":!1}},window.cpexLoader.addedEventListeners={},window.cpexLoader.addedEventListenersTimeouts={},window.cpexLoader.addedEvents={},window.cpexLoader.useSequential=window.cpexLoader.useSequential||function(){if(void 0!==cpexLoader.useSequential&&cpexLoader.useSequential||window.top.location.href.indexOf("usesequential=1")>-1)return!0;try{return!new CustomEvent("test")}catch(e){return!1}}(),window.cpexLoader.debug=window.cpexLoader.debug||window.top.location.href.indexOf("debug=1")>-1,window.cpexLoader.cpexsrc=window.top.location.href.indexOf("cpexsrc")>-1,window.cpexLoader.getParam=function(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var i=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),o=i.exec(t);return o||(o=(i=new RegExp("[#&]"+e+"(=([^&#]*)|&|#|$)")).exec(t))?o[2]?decodeURIComponent(o[2].replace(/\+/g," ")):"":null},window.cpexLoader.waitFor=function(e,t,i){"function"==typeof t?"string"==typeof e?(void 0!==this.options&&void 0!==this.options.maxWaitTime&&void 0!==this.options.maxWaitTime[e]&&(void 0===this.addedEventListenersTimeouts[e]&&(this.addedEventListenersTimeouts[e]=[]),this.addedEventListenersTimeouts[e].push(setTimeout(function(){window.cpexLoader.warn(e+" timeout fired"),t()},+this.options.maxWaitTime[e]))),i||(i={once:!0}),this.log("addEventListener",e),this.addEventListener(e,t,i)):this.error("waitFor - missing eventType"):this.error("waitFor - missing callback")},window.cpexLoader.elem=window.document.createElement("div"),window.cpexLoader.removeEventListener=function(e,t){this.elem.removeEventListener(e,t),this.decreaseEventListenersCount(e)},window.cpexLoader.decreaseEventListenersCount=function(e){this.log("decrease for "+e),void 0!==this.addedEventListeners[e]&&this.addedEventListeners[e].count>0&&this.addedEventListeners[e].count--},window.cpexLoader.addEventListener=function(e,t,i){if(this.log("addEventListener adds: "+e),void 0===this.addedEventListeners[e]&&(this.addedEventListeners[e]={count:0,onceCount:0}),this.addedEventListeners[e].count++,void 0!==i&&void 0!==i.once&&i.once&&this.addedEventListeners[e].onceCount++,this.elem.addEventListener(e,t,i),void 0!==window.cpexLoader.addedEvents[e])try{this.log("calls dispatchEvent buffer for "+e);var o=window.cpexLoader.addedEvents[e];window.cpexLoader.addedEvents[e]=void 0;for(var s=o.length,n=0;n<s;n++)if(window.cpexLoader.dispatchEvent(o[n]),void 0!==i&&void 0!==i.once&&i.once){this.decreaseEventListenersCount(e);break}}catch(e){this.log(e)}},window.cpexLoader.dispatchEvent=function(e){if(void 0===window.cpexLoader.addedEventListeners[e.type]||window.cpexLoader.addedEventListeners[e.type].count<1?(this.log("adds "+e.type+" to dispatchEvent buffer"),void 0===window.cpexLoader.addedEvents[e.type]&&(window.cpexLoader.addedEvents[e.type]=[]),this.log("addedEvents new event for "+e.type),window.cpexLoader.addedEvents[e.type].push(e)):(this.log("dispatchEvent for "+e.type),this.elem.dispatchEvent(e)),void 0!==e.type&&void 0!==this.addedEventListenersTimeouts&&void 0!==this.addedEventListenersTimeouts[e.type]){for(var t=0;t<this.addedEventListenersTimeouts[e.type].length;t++)clearTimeout(this.addedEventListenersTimeouts[e.type][t]);this.addedEventListenersTimeouts[e.type]=void 0}},window.cpexLoader.emitEvent=function(e,t){this.dispatchEvent(new CustomEvent(e,t))},window.cpexLoader.log=function(){this.debug&&console.log.apply(this,arguments)},window.cpexLoader.warn=function(){this.debug&&console.warn.apply(this,arguments)},window.cpexLoader.error=function(e){if(this.debug)console.error.apply(this,arguments);else{e||(e=""),"string"==typeof e.message&&(e=e.message);var t={type:"loader",errorMessage:e,url:window.location.href,version:window.cpexLoaderVersion},i="";for(var o in t)""!==i&&(i+="&"),i+=o+"="+encodeURIComponent(t[o]);var s=new XMLHttpRequest;s.open("POST","https://log.cpex.cz/log.php",!0),s.setRequestHeader("Content-type","application/x-www-form-urlencoded"),s.send(i)}},window.cpexLoader.checkCalledScripts=function(){try{var e=[];return void 0!==cpexLoader.options.scriptsLoaded&&(e=Object.keys(cpexLoader.options.scriptsLoaded)),function(t){if(e)for(var i=0;i<e.length;i++)t.indexOf(e[i])>-1&&(cpexLoader.options.scriptsLoaded[e[i]]=!0)}}catch(e){return window.cpexLoader.error(e),function(){}}},window.cpexLoader.checkCalledScripts(),window.cpexLoader.loadScript=function(e,t){var i=this;if(this.cpexsrc){var o=this.getParam("cpexsrc"),s="test.cpex.cz";"test"===o||(s="stage"===o?"cdn.cpex.cz/stage":"localhost"===o?"localhost:8080":o),e=e.replace("cdn.cpex.cz",s)}this.log(e+" init"),window.cpexLoader.checkCalledScripts(e);var n=document.createElement("script");document.getElementsByTagName("head")[0].appendChild(n),n.src=e,n.type="text/javascript",n.async=!1,"function"==typeof t&&(n.readyState?n.onreadystatechange=function(){"loaded"!==n.readyState&&"complete"!==n.readyState||(n.onreadystatechange=null,t())}:n.onload=function(){i.log(e+" loaded script: ",performance.now()),t()}),n.onerror=function(t){cpexLoader.error("load error "+e)}},window.cpexLoader.loadScriptsSequential=function(e,t){var i=this;try{if(void 0===e)return;"string"==typeof e&&this.loadScript(e,t);var o=0,s=[];function n(){--o<0&&(s.length<1?"function"==typeof t&&t():i.loadScriptsSequential(s,t))}if(Array.isArray(e)&&e.length>0){var r=e.shift();if(s=e,"function"==typeof r&&(r(),n()),"string"==typeof r)this.loadScript(r,n);else{o=r.length-1;for(var d=0;d<r.length;d++)"function"==typeof r[d]?(r[d](),n()):this.loadScript(r[d],n)}}else this.error("Loader: empty scriptsToLoad")}catch(e){this.error(e)}},window.cpexLoader.loadScriptsAsync=function(e,t){try{if(void 0===e)return;if("string"==typeof e&&this.loadScript(e,t),Array.isArray(e)&&e.length>0)for(var i=e.slice();i.length>0;){var o=i.shift();if("function"==typeof o)o();else if(Array.isArray(o))this.loadScriptsAsync(o,t);else if("string"==typeof o)this.loadScript(o);else for(var s=0;s<o.length;s++)"function"==typeof o[s]?o[s]():this.loadScript(o[s])}}catch(e){this.error(e)}},window.cpexLoader.init=function(){void 0!==this.scriptsToLoad&&Array.isArray(this.scriptsToLoad)&&this.scriptsToLoad.length>0?this.useSequential?(this.log("Loader uses loadScriptsSequential"),this.loadScriptsSequential(this.scriptsToLoad)):(this.log("Loader uses loadScriptsAsync"),this.shouldFireEvent(this.scriptsToLoad),this.loadScriptsAsync(this.scriptsToLoad)):void 0!==this.scriptsToLoadPath&&this.scriptsToLoad?this.loadScript(this.scriptsToLoadPath,this.init.bind(this)):this.error("Loader: missing scriptsToLoad")},window.cpexLoader.shouldFireEvent=function(e){e.indexOf("https://cdn.cpex.cz/skin/v2/cpex-skin.js")<0&&e.indexOf("https://cdn.cpex.cz/stage/skin/v2/cpex-skin.js")<0?(cpexLoader.emitEvent("cpexSkinObject"),e.push("https://cdn.cpex.cz/html5/v1/cpex-html5.js")):(e.indexOf("https://cdn.cpex.cz/skin/v2/cpex-skin.js")>-1||e.indexOf("https://cdn.cpex.cz/stage/skin/v2/cpex-skin.js")>-1)&&"function"==typeof cpexSkin&&cpexLoader.log("cpexSkin event can be fired")};var versionPaths={production:"https://cdn.cpex.cz/",stage:"https://cdn.cpex.cz/stage/",test:"https://test.cpex.cz/"},files={cmp:"cmp/v2/cpex-cmp.min.js","caf-settings":"caf/v1/settings/","skin-base":"skin/v2/base/",skin:"skin/v2/cpex-skin.js","sas-tracker":"caf/v1/catch/sas-tracker.js",prebid:"hb/prebid/prebid.min.js","hb-settings":"hb/settings/","hb-wrapper":"hb/wrappers/",aam:"aam/cpex-aam-min.js",timer:"timer/v1/cpex-timer.js"};if(void 0!==cpexLoader.extensionData){cpexLoader.log("extensionData"),cpexLoader.log(cpexLoader.extensionData);try{var hbWrapper="cpex-hb-sas-tracker.js",publisher="cpex";if(void 0!==cpexLoader.extensionData.extensionSettings){var extensionSettings=cpexLoader.extensionData.extensionSettings;hbWrapper=extensionSettings.hbWrapper||hbWrapper,publisher=extensionSettings.publisher||publisher}if(void 0!==cpexLoader.extensionData.settings){var settings=cpexLoader.extensionData.settings;if(void 0!==settings.usePath&&settings.usePath&&void 0!==settings.scriptsToLoadPath&&settings.scriptsToLoadPath)cpexLoader.scriptsToLoadPath=settings.scriptsToLoadPath;else if(void 0!==settings.stepsArray&&Array.isArray(settings.stepsArray)){console.log("steps: ",settings.stepsArray);for(var i=0;i<settings.stepsArray.length;i++){var step=settings.stepsArray[i],path=void 0!==step.version&&"string"==typeof versionPaths[step.version]?versionPaths[step.version]:"";if(path+=void 0!==step.type&&"string"==typeof files[step.type]?files[step.type]:"",void 0!==step.jsFile&&(path+=publisher+"/"+step.jsFile),void 0!==step.type&&"hb-wrapper"===step.type&&(path+=hbWrapper),"string"==typeof step.path&&step.path&&(path=step.path),void 0!==step.loadLimit){if("never"===step.loadLimit)continue;"cmp-id"===step.type&&(window.oneTrustId=step.parameter),cpexLoader.scriptsToLoad.push(path)}}}}}catch(e){cpexLoader.error(e)}}void 0!==window.cpexLoader.scriptsToLoadPath&&window.cpexLoader.scriptsToLoadPath?(window.cpexLoader.settingsDone=!1,window.cpexLoader.loadScript(window.cpexLoader.scriptsToLoadPath,function(){window.cpexLoader.settingsDone=!0,window.cpexLoader.init()})):(window.cpexLoader.settingsDone=!0,window.cpexLoader.init())}
//# sourceMappingURL=cpex-loader-min.js.map